<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <title>Ecommerce Site</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{% static 'temp/css/bootstrap.min.css' %}" />
    <!-- <link rel="stylesheet" href="{% static 'temp/css/owl.carousel.min.css' %}"> -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'temp/css/custome-style.css' %}" />
    <link rel="stylesheet" href="{% static 'temp/css/header.css' %}" />
    <link rel="stylesheet" href="{% static 'temp/css/theme.css' %}" />
    <link rel="stylesheet" href="{% static 'temp/css/responsive.css' %}" />
    <script src="{% static 'temp/js/jquery-3.6.0.min.js' %}"></script>
    <!-- owl carousel cdn -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
      integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- owl carousel theme min css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
      integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- owl carousel css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css"
      integrity="sha512-UTNP5BXLIptsaj5WdKFrkFov94lDx+eBvbKyoe1YAfjeRPC+gT5kyZ10kOHCfNZqEui1sxmqvodNUx3KbuYI/A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  </head>

  <body>
    <!-- header -->

    {% include "temp/header.html" %}
    <!-- Hero Section  -->
    <section class="section__container pt-1 pb-0">
      <div class="container-fluid">
        <div class="row">
          <div class="col-2">
            <!-- Null for space  -->
          </div>
          <div class="col-md-12 col-lg-12">
            <div class="banner__section">
              <!-- Set up Carousel -->
              <div class="BannerCarousel owl-carousel">
                <!-- Loop through sliders -->
                {% for slider in sliders.slider_item.all %}
                <div class="carouselItem">
                  <img src="{{ slider.image.url }}" alt="{{ slider.title }}" />
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- image style section -->

    <style>
      /* Add styles to the image style section */
     .bgas {
      background-image: linear-gradient(90deg, rgba(220, 53, 69, 1) 0%, rgba(255, 169, 8, 1) 100%);
     }
    </style>


<div class="bgas">
  <div style="background: rgb(220,53,69);
  background: linear-gradient(90deg, rgba(220,53,69,1) 0%, rgba(255,169,8,1) 100%); padding: 50px;" class="image__style">
    <div class="container-fluid">
      <style>
        .category-box {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 150px; /* Adjust this value as needed */
          background-color: #f5f5f5; /* Light background */
          border-radius: 10px; /* Optional: Rounded corners */
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: Shadow for depth */
          transition: transform 0.3s ease-in-out; /* Smooth hover effect */
          gap:10px;
          cursor: pointer; /* Optional: Cursor style */
        }
      
        .category-box:hover {
          transform: scale(1.05); /* Slight zoom on hover */
       }
      
        .category-name {
          text-align: center;
          color: #383838;
          font-weight: 600;
          font-size: 20px;
          margin: 0;
        }
      
      </style>
      <div class="row gx-0">
        {% for category in categories %}
        <div class="col-md-3">
            <div class="category-box">
                <h2 class="category-name">{{ category.name }}</h2>
            </div>
        </div>
        {% endfor %}
    </div>
    </div>
   </div>

  <!-- section -->

  <div
    style="background: rgb(220,53,69);
background: linear-gradient(90deg, rgba(220,53,69,1) 0%, rgba(255,169,8,1) 100%); "
    class="container-fluid px-3 "
  >
    <div class="row">
      <div id="container__div">
        <h1
          style="text-align: center; color: #fff"
          class="heading__h1 mb-5"
        >
          Hire More info
        </h1>
        <div class="owl-carousel owl-theme">
          {% for product in productss %}
          <div class="item">
            <div class="shop__product__area">
              <div class="shop__product__img">
                <a href="{% url 'single-product' slug=product.slug %}">
                  <!-- Update this link if you have a detail page -->
                  <img
  class="w-100 object-cover" 
  style="height: 200px;" 
  src="{{ product.product_image.url }}"
  alt="{{ product.product_name }}"
/>
                
                </a>
                <p>{{ product.product_description }}</p>
              </div>
              <div class="ratings"></div>
              <div class="product__price">
                <span>TK {{ product.product_price }} (BDT)</span>
              </div>
              <div class="addToCart">
                {% if product.product_quantity > 0 %}
                <button onclick="addToCart('{{ product.id }}', 1)" id="orderNowButton">Order Now</button>
                {% else %}
                <button disabled>Out of Stock</button>
                {% endif %}
            </div>
            
            <script>
              function addToCart(productId, quantity) {
                const orderNowButton = document.getElementById('orderNowButton');
                
                // Disable the button to prevent multiple clicks
                orderNowButton.disabled = true;
                orderNowButton.textContent = "Adding...";
            
                fetch("{% url 'add_to_cart' %}", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: JSON.stringify({ 'product_id': productId, 'quantity': quantity })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        // Show SweetAlert and wait for it to close before reloading
                        Swal.fire({
                            position: "center",
                            icon: "success",
                            title: "Add Cart Success",
                            showConfirmButton: false,
                            timer: 2500
                        }).then(() => {
                            // Reload the page after the alert closes
                            window.location.reload(true);
                        });
                    } else {
                        Swal.fire({
                            icon: "error",
                            title: "Oops...",
                            text: "Error adding product to cart",
                        });
                        // Re-enable the button if there's an error
                        orderNowButton.disabled = false;
                        orderNowButton.textContent = "Order Now";
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    Swal.fire({
                        icon: "error",
                        title: "Oops...",
                        text: "An error occurred while adding the product to the cart",
                    });
                    // Re-enable the button if there's an error
                    orderNowButton.disabled = false;
                    orderNowButton.textContent = "Order Now";
                });
            }
            
            </script>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid px-3  ">
    <div id="container__div">
      <h1 style="text-align: center; color: #fff" class="heading__h1 mb-5">
        Here For You
      </h1>
      <div class="row ">
        {% for product in products %}
        <div class="col-md-2">
          <div class="shop__product__area">
            <div class="shop__product__img">
              <a href="{% url 'single-product' slug=product.slug %}">
                <img
  class="w-100 object-cover" 
  style="height: 200px;" 
  src="{{ product.product_image.url }}"
  alt="{{ product.product_name }}"
/></a>
              <p>{{product.product_description}}</p>
            </div>
            <div class="ratings"></div>
            <div class="product__price">
              <span>TK {{product.product_price}} (BDT) </span>
            </div>
            <div class="addToCart">
              {% if product.product_quantity > 0 %}
              <button onclick="addToCart('{{ product.id }}', 1)" id="orderNowButton">Order Now</button>
              {% else %}
              <button disabled>Out of Stock</button>
              {% endif %}
          </div>
          
          <script>
            function addToCart(productId, quantity) {
              const orderNowButton = document.getElementById('orderNowButton');
              
              // Disable the button to prevent multiple clicks
              orderNowButton.disabled = true;
              orderNowButton.textContent = "Adding...";
          
              fetch("{% url 'add_to_cart' %}", {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                      'X-CSRFToken': '{{ csrf_token }}'
                  },
                  body: JSON.stringify({ 'product_id': productId, 'quantity': quantity })
              })
              .then(response => response.json())
              .then(data => {
                  if (data.message) {
                      // Show SweetAlert and wait for it to close before reloading
                      Swal.fire({
                          position: "center",
                          icon: "success",
                          title: "Add Cart Success",
                          showConfirmButton: false,
                          timer: 2500
                      }).then(() => {
                          // Reload the page after the alert closes
                          window.location.reload(true);
                      });
                  } else {
                      Swal.fire({
                          icon: "error",
                          title: "Oops...",
                          text: "Error adding product to cart",
                      });
                      // Re-enable the button if there's an error
                      orderNowButton.disabled = false;
                      orderNowButton.textContent = "Order Now";
                  }
              })
              .catch(error => {
                  console.error('Error:', error);
                  Swal.fire({
                      icon: "error",
                      title: "Oops...",
                      text: "An error occurred while adding the product to the cart",
                  });
                  // Re-enable the button if there's an error
                  orderNowButton.disabled = false;
                  orderNowButton.textContent = "Order Now";
              });
          }
          
          </script>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

    <!--Footer  -->
    {% include "temp/footer.html" %}

    <script src="{% static 'temp/js/jquery.min.js' %}"></script>
    <script src="{% static 'temp/js/jquery.flexslider.js' %}"></script>
    <script src="{% static 'temp/js/imagezoom.js' %}"></script>
    <script src="{% static 'temp/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'temp/js/bootstrap.bundle.min.js' %}"></script>
    <!-- <script src="{% static 'temp/js/owl.carousel.min.js' %}"></script> -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
      integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.js"
      integrity="sha512-gY25nC63ddE0LcLPhxUJGFxa2GoIyA5FLym4UJqHDEMHjp8RET6Zn/SHo1sltt3WuVtqfyxECP38/daUc/WVEA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="{% static 'temp/js/fontawesome-all.min.js' %}"></script>
    <script src="{% static 'temp/js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'temp/js/main.js' %}"></script>

    <script>
      //  li item hover effect
      $(document).ready(function () {
        // When hovering over an li item
        $("li").hover(
          function () {
            // Show the corresponding mega menu
            $(this).find(".megamenu").stop(true, true).slideDown("fast");
          },
          function () {
            // Hide the mega menu when the mouse leaves
            $(this).find(".megamenu").stop(true, true).slideUp("fast");
          }
        );
      });
    </script>

    <script>
      $("#slideone .owl-carousel").owlCarousel({
        loop: true,
        margin: 10,
        nav: true,
        responsive: {
          0: {
            items: 1,
          },
          600: {
            items: 2,
          },
          1000: {
            items: 3,
          },
        },
      });
    </script>

    <script>
      $("#carousel__item__1 .owl-carousel").owlCarousel({
        loop: true,
        margin: 10,
        nav: true,
        responsive: {
          0: {
            items: 2,
          },
          600: {
            items: 2,
          },
          1000: {
            items: 6,
          },
        },
      });
    </script>
    <script>
      $("#container__div .owl-carousel").owlCarousel({
        loop: true,
        margin: 10,
        nav: true,
        responsive: {
          0: {
            items: 2,
          },
          600: {
            items: 2,
          },
          1000: {
            items: 6,
          },
        },
      });
    </script>
  </body>
</html>
